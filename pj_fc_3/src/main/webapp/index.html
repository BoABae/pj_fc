<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript"
	src="//apis.daum.net/maps/maps3.js?apikey=4d9735d3facdb6194d2212737085121c&libraries=services"></script>
<script src="https://code.jquery.com/jquery-3.1.1.js"
	integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
	crossorigin="anonymous"></script>
<link rel="stylesheet"
	href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<link rel="stylesheet"
	href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
<link rel="stylesheet"
	href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="js/lib/underscore.js"></script>
<script src="js/lib/backbone.js"></script>
<link rel="stylesheet" href="css/slider.css">
<style>
.header {
	width: 100%;
	height: 60px;
	background-color: #ccc;
	margin: 0 auto;
}

.footer {
	width: 100%;
	height: 60px;
	background-color: #ccc;
	margin: auto 0 0 0;
}

.btn_back {
	width: 50px;
	height: 50px;
}

body {
	background-color: #f2f2f2;
}

.content {
	width: 75%;
	height: 400px;
	border: solid 2px #a6a6a6;
	margin: 0 auto;
}

.btn_con {
	width: 50px;
	height: 50px;
	border-radius: 20px;
}

/* tempororily */
#content {
	width: 75%;
	height: 400px;
	border: solid 2px #a6a6a6;
	margin: 0 auto;
}

#map {
	width: 600px;
	height: 400px;
}
</style>

</head>
<body>
	<div id="header"></div>
	<div id="content" class="content"></div>



	<!-- header부분  -->
	<script type="text/template" id="header_html">
<div class="header">
<button class="btn_back">click</button>

</div>
</script>

	<!-- content부분 -->
	<script type="text/template" id="content_html">
<button id="colorPicker">
<a href="#cssEdit_html">
css

</a>

</button>

<button>
<a href="#map_html">
map
</a>
</button>

<button>
<a href="#SNS_html">SNS</a>

</button>

</script>

<script type="text/template" id="cssEdit_html">


</script>


<script type="text/template" id="map_html">

<div id="map"></div>
<input type="text" id="address">
<button id="search">search</button>
<div id="show"></div>

</script>

<script type="text/template" id="SNS_html">
<div>
<button id="facebook">facebook 연결하기</button>
<button id="twitter">twitter 연결하기</button>
<button id="kakaostory">kakaostory 연결하기</button>
</div>

</script>
<script>
$(function(){
	var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
	mapOption = {
		center : new daum.maps.LatLng(37.404337, 127.106141), // 지도의 중심좌표
		level : 3
	// 지도의 확대 레벨
	};

	var map = new daum.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
	
	// 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
	var zoomControl = new daum.maps.ZoomControl();
	map.addControl(zoomControl, daum.maps.ControlPosition.RIGHT);
	
	document.getElementById("search").addEventListener("click", address);


	var geocoder = new daum.maps.services.Geocoder();
	console.log(geocoder);
	//search button click event
	function address() {
		var ad = document.getElementById("address").value;
		
		geocoder.addr2coord(ad, function(status, result) {
	
			// 정상적으로 검색이 완료됐으면 
			if (status === daum.maps.services.Status.OK) {

				var coords = new daum.maps.LatLng(result.addr[0].lat,
						result.addr[0].lng);

				// 결과값으로 받은 위치를 마커로 표시합니다
				var marker = new daum.maps.Marker({
					map : map,
					position : coords,
					draggable : true
				});
				map.setCenter(coords);

				//marker를 옮겼을 때 좌표를 받아오기. 
				daum.maps.event.addListener(marker, 'dragend', function() {
					
					var latlng = marker.getPosition();
				    searchDetailAddrFromCoords(latlng, function(status, result) {
				        if (status === daum.maps.services.Status.OK) {
				            var detailAddr = result[0].jibunAddress.name;
				            
				            var content = detailAddr;
				              document.getElementById("show").innerHTML = content;
				             
				              document.getElementById("address").value = content;  
				            // 마커를 클릭한 위치에 표시합니다 
				            marker.setPosition(latlng);
				            marker.setMap(map);   
				        }  
				    });
				});
			}
		});
	}
	function searchDetailAddrFromCoords(coords, callback) {
	    // 좌표로 법정동 상세 주소 정보를 요청합니다
	    geocoder.coord2detailaddr(coords, callback);
	}});
</script>


	<script src="js/collections/collection.js"></script>
	<script src="js/models/model.js"></script>
	<script src="js/views/main_view.js"></script>
	<script src="js/Backbone.View.js"></script>
	<script src="js/ContentView.js"></script>
	<script src="js/routers/router.js"></script>
	<script src="js/views/snsView.js"></script>

	<script src="js/views/mapView.js"></script>
	<script src="js/views/colorPickerView.js"></script>
	<script type="text/javascript">
		var r = new ApplicationRouter($('#content'));
		Backbone.history.start();
	</script>
<script>


	
	
	
</script>

</body>
</html>